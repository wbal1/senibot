# „시니봇 Senibot”
고등학교 3학년 당시 "수업량 유연화"라는 활동이 있었는데, 비슷한 진로를 가진 학생들끼리 모아서 결과물을 내는 프로젝트를 진행하고 발표하는 것을 기말고사 전에 하루, 방학 전에 1주 정도 날짜를 잡아 일곱 교시 전부를 프로젝트 설정 및 개발, 발표 준비 등에 쏟게 했고 잘 만들어진 것은 후에 중앙 계단 등의 공개적인 장소에 따로 전시하기도 했었습니다. 3학년 때, 그러니까 2025년에는 5월 23일 , 7월 12일에서 16일까지 진행했던 걸로 추정됩니다.[^1][^2][^3]
[^1]: 아이디어를 골라 결과물로서 만들 것을 추리기 위해 나온 아이디어를 적어놓은 파일(`[2024. 수업량 유연화] 필기.HWP`: 마지막으로 수정 2024‎년 ‎5‎월 ‎23‎일 ‎목요일, ‏‎오후 1:16:51)과 활동계획서 파일(`2024.3학년 융합탐구 프로젝트 활동계획서_ [조 번호]_×[조명]_[조장 실명]([조장 학번]).HWP` (파일명에 개인정보가 포함됨으로써 일부 가림): ‎마지막으로 수정 2024‎년 ‎5‎월 ‎23‎일 ‎목요일, ‏‎오후 1:59:12)이 5월 23일 마지막으로 수정되었습니다(그 날 이후로 보기만 했지 안 건드린 것으로 기억합니다).
[^2]: 5월 23일과 7월 12일 사이에 톡방에 올라온 내용은 5월 29일에 "물품 신청이 내일까지라 필요하면 담당 교사와 상의하여 내일 오전까지 신청하라"는 내용 하나뿐이였습니다(`수업량 유연화 탐구 물품 1차 신청이 내일까지 입니다. \r\n탐구 물품이 필요한 경우 수업량 유연화 선생님과 상의하여 \r\n내일 오전까지 신청하길 바랍니다. (입력 마감이 내일이라 가능하면 오늘 찾아가세요!!)` by 조장 @ 29 APR 2024 2:46 PM).
[^3]: 프로젝트의 첫 번째 소스 코드가 7월 12일 오전 10시 7분에 채팅방에 올라왔으며 프로젝트 파일 중 가장 먼저 쓰여진 파일(`requirements.PY`, 마지막으로 수정 ‎2024‎년 ‎7‎월 ‎12‎일 ‎금요일, ‏‎오전 10:03:18) 역시 같은 날에 쓰여졌습니다. 프로젝트 파일 중 가장 나중에 쓰여진 파일(`credentials.JSON`,  마지막으로 수정 ‎2024‎년 ‎7‎월 ‎16‎일 ‎화요일, ‏‎오전 8:57:06)이 7월 16일 쓰여졌으며, [이 파일이 만들어지기 전 마지막으로 진행된 커밋](https://github.com/wbal1/senibot/commit/155fb27a84e1e7aa37b8c4ad00093a0f238e2b83) 역시 같은 날에 진행되었습니다. 발표 후 쓰는 결과보고서와 자기평가서 중 나중에 작성된 자기평가서 파일(`[2024. 수업량 유연화] 자기평가서.HWP`, 마지막 수정 ‎2024‎년 ‎7‎월 ‎16‎일 ‎화요일, ‏‎오후 12:04:55) 또한 같은 날에 쓰여졌습니다(마지막 날 발표했으며, 결과보고서와 자기평가서 모두 발표 직후에 작성되었습니다).
> '자연어 처리 기반 노인 지원 챗봇 개발' 제작을 주제로 선정함. (중략) 최근 쟁점이 되는 대화형 프로그램에 대해 자료를 조사하고 노인들의 관심사를 중심으로 질문할 내용들을 입력하여 독거노인들에게 도움을 주는 프로그램을 개발함. 모둠원들과 '시니어봇'이라 부르는 프로그램을 개발하기 위해 기능들에 대한 아이디어를 토의하고 데이터 분석 언어를 이용하여 자연어 처리 기반 프로그램을 완성함. 사이트의 전반적인 디자인을 만들고 사용자 인터페이스를 편리하게 만들기 위해 자동으로 다크 모드로 전환되는 기능을 추가하는 등 노인들의 입장에서 편리하게 사용할 수 있는 핵심 기능을 훌륭하게 구현함.
> <p align="right">- 고등학교 학교생활기록부 중</p>
레포지토리의 코드 내에서는 외관상으로 보이는 부분을 제외하고는 프로그램의 거의 대부분(`.PY` 파일)이 ChatGPT를 사용해 생성되었으며 그 외에 부분은 저 본인이 담당했습니다. DialogFlow를 사용하여 대화의 예시 내용을 구축하였고 시연을 위한 호스팅을 위해 Render와 OAuth를 사용했습니다.

프로젝트가 있게 해 준 나머지 2명의 조원들과 조장에게 감사의 말씀을 드립니다.
## 사용해 보기
먼저 DialogFlow API 서비스를 OAuth와 연결해야 합니다. Google Cloud 프로젝트가 필요합니다.
1. "DialogFlow API" 검색 > 활성화
2. "서비스 계정" 검색 > "서비스 계정 만들기" 클릭 > "이 서비스 계정에 프로젝트에 대한 액세스 권한 부여"에서 "Dialogflow API 클라이언트" 역할 부여 (필터링 사용)

(위 절차의 작성은 ChatGPT의 도움을 받음.)

`dialog.client.PY` 파일 중 `credentials.JSON` 파일이 언급되는데 이 JSON 파일은 OAuth 2.0 클라이언트 ID(데스크톱 앱 유형)로 Google Cloud Console에서 만들 수 있으며[^4] **만든 직후에 JSON 파일이 다운로드됩니다. 이는 수동으로 다운로드할 수 없습니다.**
[^4]: API 및 인증 (좌상단 메뉴 버튼) > 서비스 계정 > "권한" 탭 > 액세스 권한 부여 > "역할 지정"에서 "편집자" 권한 선택 (검색) > API 및 인증으로 돌아오면 "서비스 계정"에서 이메일 클릭 > "키" 탭 > 키 추가 > 새 키 만들기 > 키 유형 JSON으로 하고 "만들기" 버튼 으로 만들며 다운로드 후 유실에 주의 (우발적 파일 삭제 등)

로컬에서 사용하기 위해서는 다운로드받은 JSON 파일의 이름이 `credentials.JSON`이여햐 하며 `app.PY`와 같은 폴더에 위치하여야 합니다.

웹에서 사용하기 위해서는 먼저 `credentials.JSON`의 내용을 다음과 같이 환경 변수에 할당합니다. 여기서는 Render를 기준으로 설명합니다.

|키|값|
|--|--|
|`GOOGLE_APPLICATION_CREDENTIALS_JSON`|`credentials.JSON` 파일[^5] 내용 전체|
|`GOOGLE_CLIENT_ID`|클라이언트 ID (Google Cloud Console에서 확인할 수 있음[^6])|
|`GOOGLE_CLIENT_SECRET`|클라이언트 보안 비밀번호 (Google Cloud Console에서 확인할 수 있음[^6])|
[^5]: 파일명이 다를 수 있으나 중요하지 않습니다.
[^6]: Google 인증 플랫폼(검색) > 클라이인트 > (생성한 키) 에서 확인할 수 있으며 최초 생성 후 언제든 확인 가능합니다.

그 다음 `credentials.JSON`과 `client_secrets.JSON`[^5][^7]을 비밀 파일 란에 그 내용을 다음과 같이 입력합니다.
[^7]: Google 인증 플랫폼(검색) > 클라이인트 > (생성한 키)에서 "클라이언트 보안 비밀번호" 행 오른쪽의 다운로드 버튼을 통해 다운로드 가능합니다.

<table>
  <tr>
    <th>파일명</th>
    <th>내용</th>
  </tr><tr>
    <td>`client_secrets.json`</td>
    <td rowspan="2">JSON 파일 내용 전체</td>
  </tr><tr>
    <td>`credentials.JSON`</td>
  </tr>
</table>

로컬에서 사용하려면 127.0.0.1:5000으로 들어가시면 됩니다. 웹에서 사용하려면 설정한 주소로 들어가시면 됩니다.
